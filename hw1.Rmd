---
title: "hw1"
author: "James Dalgleish"
date: "September 13, 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
Here, we're creating a tibble, essentially a data.frame, with multiple data
types, numeric, logical, character, and factor making up four distinct columns.

```{r create_tibble}
rand10_greaterthan2_letters_factor_tibl <- tibble::tibble( 
  ten_random_0_to_5 = runif(n = 10, min = 0, max=5),
  logical_greater_than_two = ten_random_0_to_5 > 2,
  first_ten_letters = letters[ 1:10 ],
greater_than_two_factor = as.factor( logical_greater_than_two )

)
head(rand10_greaterthan2_letters_factor_tibl)
```
Now, we'll attempt to take the mean of all the columns... we'll note that some
of these columns are
not numeric and therefore a mean would be difficult to calculate. Taking the 
mean of every column won't work because means are only meaingful on numeric 
and integer vectors.

```{r means}
 tibl_means <- sapply( rand10_greaterthan2_letters_factor_tibl, mean)
mean( rand10_greaterthan2_letters_factor_tibl$ten_random_0_to_5 )

print( tibl_means )
```
You can also take the mean of a logical TRUE/FALSE, with TRUE being
automatically converted to 1 and FALSE to zero. 

```{r mean_logical}
mean( rand10_greaterthan2_letters_factor_tibl$logical_greater_than_two )

```
Taking the mean of a character vector doesn't make sense and doesn't work.
See below.
```{r mean_letters}
mean( rand10_greaterthan2_letters_factor_tibl$first_ten_letters )

```
You cannot take the mean of a factor. The error message says it all...
it's best if you have a numeric or logical vector here.

```{r mean_factor}
mean( rand10_greaterthan2_letters_factor_tibl$greater_than_two_factor )
```

 Using some conditional logic, we find we can take just the means
of the columns that are amenable to means.

```{r means_with_check}
 #putting in a check to determine if it's numeric.
tibl_means <- sapply( rand10_greaterthan2_letters_factor_tibl,
                     function(x)
                     if ( is.numeric( x ) ) {
                     return( 
                       mean( x )
                       )
                     } else {
                     return( "Incompatible type for mean" )
                     })
 print(tibl_means)
```
Converting the logical, character, and factor columns to numeric:
```{r converting_to_numeric,eval=F}
tibl_as_num_log_char_num <-
  sapply( rand10_greaterthan2_letters_factor_tibl,
  function(x)
  if (is.logical(x) |
  is.character(x) |
  is.factor(x)) {
  return(as.numeric(x))
  } else {
  return(NULL)
  })
  print( tibl_as_num_log_char_num )

```
The logical TRUEs have been converted to 1s and the logical FALSEs have been
converted to 0s. The letters are completely incompatible and result with 
empty values (NAs). The logical vector can be converted to numeric...
so this is something to watch out for and avoid if not intended.

Converting character variable from character to factor to numeric:
```{r char_to_fact_to_num}
class(rand10_greaterthan2_letters_factor_tibl$first_ten_letters)
as.factor( rand10_greaterthan2_letters_factor_tibl$first_ten_letters ) 
as.numeric(
as.factor(rand10_greaterthan2_letters_factor_tibl$first_ten_letters) 
)
```
Converting a 10 length character vector to factor generates a factor with
10 levels of length 10. Converting this factor to numeric gives the number 
(index) corresponding with the factor level at each position.

-----
##Converting a factor to character to numeric.
```{r}
rand10_greaterthan2_letters_factor_tibl$greater_than_two_factor
as.character( rand10_greaterthan2_letters_factor_tibl$greater_than_two_factor )
as.numeric( 
  as.character( rand10_greaterthan2_letters_factor_tibl$greater_than_two_factor )
)
```
The factor levels are appropriately converted from TRUE to "TRUE", but R doesn't
quite know how to convert "TRUE" into a number. Each of the attempted
conversions turn into missing values (NAs).
